{"version":3,"sources":["webpack:///src/components/Khipu.vue","webpack:///./src/components/Khipu.vue","webpack:///./src/components/Khipu.vue?d08a"],"names":["Khipu","type","transaction_id","_this","this","body","_ref","data","key","urls","_this2","$socket","sockets","trx","confirmTrx","Component","Object","component_normalizer","_vm","_h","$createElement","_c","_self","attrs","resource","initTrx","model","value","callback","$$v","expression","_v","_s","_f","_e","_l","url","href","receipt_url","__webpack_exports__"],"mappings":"8HAuBAA,+BAIA,UACA,SAEA,0DAIAC,yDAGAC,6CAIA,IAAAC,EAAAC,sEACA,IAAAC,EAAAC,EAAAD,YACAA,cACA,sBACAE,0CAGAC,0BACA,mCACAA,uBAEAC,GACAA,oDAMA,qDAGA,0BAGA,IAAAC,EAAAN,sBACAO,mCACAC,uCACAV,gGAGA,mBACAW,SACAA,uCAGAX,uDAIA,oDACAY,yBCnEAC,EAAAC,OAAAC,EAAA,EAAAD,CACAhB,ECfA,WAA0B,IAAAkB,EAAAd,KAAae,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,gBAAAH,EAAAjB,KAAAoB,EAAA,eAAuDE,OAAOC,SAAAN,EAAAO,SAAuBC,OAAQC,MAAAT,EAAA,KAAAU,SAAA,SAAAC,GAA0CX,EAAAT,KAAAoB,GAAaC,WAAA,UAAoBT,EAAA,MAAAH,EAAAa,GAAA,uCAAAb,EAAAa,GAAA,KAAAb,EAAA,KAAAG,EAAA,OAAAH,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,GAAA,SAAAf,GAAAX,UAAAW,EAAAgB,KAAAhB,EAAAa,GAAA,KAAAb,EAAA,KAAAG,EAAA,eAAAH,EAAAiB,GAAAjB,EAAA,cAAAkB,EAAA5B,GAA6N,OAAAa,EAAA,qBAA+Bb,MAAAe,OAAec,KAAAD,KAAYlB,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,GAAA,iBAAAf,CAAAV,UAAkDU,EAAAgB,MAAA,cAAAhB,EAAAjB,KAAAoB,EAAA,OAAAA,EAAA,MAAAH,EAAAa,GAAA,iCAAAb,EAAAjB,KAAAoB,EAAA,OAAAA,EAAA,MAAAH,EAAAa,GAAA,yBAAAb,EAAAa,GAAA,KAAAb,EAAA,IAAAG,EAAA,OAAAA,EAAA,MAAAH,EAAAa,GAAA,iCAAAb,EAAAa,GAAA,KAAAV,EAAA,SAAwQE,OAAOc,KAAAnB,EAAAL,IAAAyB,eAA4BpB,EAAAa,GAAA,sBAAAb,EAAAa,GAAA,KAAAV,EAAA,OAAAH,EAAAa,GAAAb,EAAAc,GAAAd,EAAAe,GAAA,SAAAf,GAAAL,UAAA,GAAAK,EAAAgB,OAAAhB,EAAAgB,MAAA,QDMr3B,EAEA,KAEA,KAEA,MAYAK,EAAA,QAAAxB,EAAA","file":"static/js/8.bf8f51a1abd490e8528a.js","sourcesContent":["<template>\n<div>\n    <api-request v-if=\"type==='init'\":resource=\"initTrx\" v-model=\"urls\">\n        <h2>Generando la transacción en Khipu</h2>\n        <pre v-if=\"data\">{{data|pretty}}</pre>\n        <b-list-group v-if=\"urls\">\n            <b-list-group-item v-for=\"(url,key) in urls\" :key=\"key\" :href=\"url\">{{key|fromUnderscore}}</b-list-group-item>\n        </b-list-group>\n    </api-request>\n    <div v-else-if=\"type==='cancel'\"><h2>Pago Cancelado</h2></div>\n    <div v-else-if=\"type==='return'\">\n        <h2>Esperando respuesta</h2>\n        <div v-if=\"trx\">\n            <h3>Pago realizado exitosamente</h3>\n            <b-btn :href=\"trx.receipt_url\">Descargar Recibo</b-btn>\n            <pre>{{trx|pretty}}</pre>\n        </div>\n    </div>\n        \n</div>\n</template>\n\n<script>\nexport default{\n    data(){\n        return {\n            urls:null,\n            data:null,\n            trx:null\n        };\n    },\n    computed:{\n        type(){\n            return this.$route.query.type;\n        },\n        transaction_id(){\n            return this.$route.query.transaction_id;\n        }\n    },\n    methods:{\n        initTrx(){\n            return this.$http.get(this.$route.path+\".json\").then(({body})=>{\n                this.data=body;\n                console.log(\"data\");\n                console.log(this.data);\n                let urls = {};\n                for(let key in body){\n                    console.log(key);\n                    console.log(key.endsWith(\"url\"));\n                    if(key.endsWith(\"url\")) urls[key]=body[key];\n                }\n                console.log(urls);\n                return urls;\n            });\n        }\n    },\n    filters:{\n        pretty(val){\n            return JSON.stringify(val,null,2);\n        },\n        fromUnderscore(v){\n            return v.replace(/_/g,\" \");\n        }\n    },\n    mounted(){\n        console.log(this.$socket);\n        console.log(this.$options.sockets);\n        this.$socket.emit(\"test\",this.transaction_id);\n        if(this.type===\"return\"){\n            this.$options.sockets.confirmTrx = trx=>{\n                console.log(\"TRX\");\n                console.log(trx);\n                this.trx=trx;\n            };\n            this.$socket.emit(\"confirmTrx\",this.transaction_id);\n            \n        }\n    },\n    beforeDestroy(){\n        console.log(\"van a destruir PAGO\");\n        delete this.$options.sockets.confirmTrx;\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Khipu.vue","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Khipu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Khipu.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0d3d07d0\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Khipu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Khipu.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.type==='init')?_c('api-request',{attrs:{\"resource\":_vm.initTrx},model:{value:(_vm.urls),callback:function ($$v) {_vm.urls=$$v},expression:\"urls\"}},[_c('h2',[_vm._v(\"Generando la transacción en Khipu\")]),_vm._v(\" \"),(_vm.data)?_c('pre',[_vm._v(_vm._s(_vm._f(\"pretty\")(_vm.data)))]):_vm._e(),_vm._v(\" \"),(_vm.urls)?_c('b-list-group',_vm._l((_vm.urls),function(url,key){return _c('b-list-group-item',{key:key,attrs:{\"href\":url}},[_vm._v(_vm._s(_vm._f(\"fromUnderscore\")(key)))])})):_vm._e()],1):(_vm.type==='cancel')?_c('div',[_c('h2',[_vm._v(\"Pago Cancelado\")])]):(_vm.type==='return')?_c('div',[_c('h2',[_vm._v(\"Esperando respuesta\")]),_vm._v(\" \"),(_vm.trx)?_c('div',[_c('h3',[_vm._v(\"Pago realizado exitosamente\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"href\":_vm.trx.receipt_url}},[_vm._v(\"Descargar Recibo\")]),_vm._v(\" \"),_c('pre',[_vm._v(_vm._s(_vm._f(\"pretty\")(_vm.trx)))])],1):_vm._e()]):_vm._e()],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0d3d07d0\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Khipu.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}